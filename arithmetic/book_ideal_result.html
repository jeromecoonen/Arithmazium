<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <title>Arithmazium</title>
  <meta name="description" content="/Users/jeromecoonen/amaze/Arithmazium/arithmetic/book_ideal_result.html">
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <meta name='theme-color' content='#fafafa'>
  <link rel='stylesheet' href='../css/normalize.css'>
  <link rel='stylesheet' href='../css/main.css'>
  <link rel='stylesheet' href='../css/para.css'>
  <link rel='stylesheet' href='../css/numbers.css'>
  <link href='https://fonts.googleapis.com/css?family=Days One' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Roboto Mono' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Fira Code' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Work Sans' rel='stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Work Sans:wght@400;800' rel='stylesheet'>
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_SVG">
  </script>
</head>
<body>
  <div>
  <svg viewbox='0 0 1000 80' xmlns='http://www.w3.org/2000/svg'>
  <a class="para-ban" href='../index.html'>
  <rect x=0 y=0 width=1000 height=80 class='arith-ban-box'/>
  <text x=10 y=68 class='arith-ban-back'>
  <tspan>11.001001000011111101101010100010001000</tspan>
  </text>
  <text x='60' y='55' class='arith-ban-front'>
  <tspan>Arithmazium</tspan>
  </text>
  </a>
  </svg>
  </div>
  <div class='next-prev'>
  <a href='book_coercion.html' class='next round'>Next</a>
  <a href='aaaarithmetic_toc.html' class='tree round'>Home</a>
  <a href='book_operations.html' class='previous round'>Previous</a>
  </div>


<h1>The ideal intermediate result</h1>

<p>
Floating point operations follow a two-step process
that is remarkably simple, in principle:
</p>

<nl>
  <li>
    Compute an <em>ideal</em> intermediate result,
    as if with unbounded range and precision.
  </li>
  <li>
    Coerce the intermediate result to fit within
    the range and precision of the destination.
  </li>
</nl>

<p>
The process seems perfectly logical. Naturally, it's
the fast, economical execution that poses challenges.
</p>

<p>
Of course,
we don't really need <em>unbounded</em> precison in
the intermediate result. We need just enough
to provide a normalized (if possible), correctly-rounded
result.
</p>

<h2>An ideal intermediate</h2>
<p>
This diagram captures what is needed to produce
a correctly rounded result.
</p>

<pre><med-code>  +---+---------------------+-------+
  | C | b &bull; b b b b . . . b | G R S |
  +---+---------------------+------ +
</med-code></pre>

<p>
Reading from left to right,
the leading <em>Carry</em> bit catches a carry-out
that might, for example,
arise in magnitude addition of normalized
values.
</p>

<p>
The string of <code>b</code> bits represent the number
of significant bits in the destination value. This is
also known as the <em>precision</em>. The binary point
is positioned after the leading significant bit, but
that's just a convention. The exponent, not shown,
aligns the binary point to its position in the mathematical
value.
</p>

<p>
<em>Guard</em> and <em>Round</em> are the next two 
bits beyond the rightmost <code>b</code>.
The <em>Sticky</em> bit is the logical sum of all bits
to the right or <em>Round</em>,
in the infinitely precise result.
These names came into common usage during the development
of IEEE 754.
</p>

<p>
It's <em>Sticky</em> that provides the sense of
<em>unbounded precision</em>. Just to be clear, <em>Sticky</em>
is <code>0</code> only if every bit to the right of
<em>Round</em> is <code>0</code>. If any righward bit
is <code>1</code>, then <em>Sticky</em> is <code>1</code>.
</p>

<p>
During <a class="inline" href="book_coercion.html">
Coercion</a>
of the result to the destination, we'll see
the roles these bits play.
</p>

<h2><code>add()</code> and <code>sub()</code></h2>

<p>
We look at arithmetic on bytes in the
<a class="inline" href="../numbers/aaanumbers_toc.html">
Number Hall</a>.
Floating point <code>add()</code> and <code>sub()</code> are
made complicated by the shifting required to align the
binary points, and then the realignment during coercion. 
</p>

<p>
As a first example, let's compute \( 1 + 1 \).
</p>

<pre><med-code>        1 &bull; 0 0 0 0 0 0 0
      + 1 &bull; 0 0 0 0 0 0 0
      -------------------
  +---+-------------------+-------+
  | 1 | 0 &bull; 0 0 0 0 0 0 0 | 0 0 0 |
  +---+-------------------+------ +
</med-code></pre>




<div class='next-prev'>
<a href='book_coercion.html' class='next round'>Next</a>
<a href='aaaarithmetic_toc.html' class='tree round'>Home</a>
<a href='book_operations.html' class='previous round'>Previous</a>
</div>
<script src="../js/vendor/jquery.js"></script>
<script src="../js/plugins.js"></script>
<script src="../js/main.js"></script>

<!-- Google Analytics: change UA-XXXXX-Y to be your site's ID. -->
<script>
window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
  ga('create', 'UA-165469376-1', 'auto'); ga('set','transport','beacon'); ga('send', 'pageview')
</script>
<script src="https://www.google-analytics.com/analytics.js" async></script>
</<body>

</html>
